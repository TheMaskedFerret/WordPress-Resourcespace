(function(e){function t(t){for(var r,i,o=t[0],c=t[1],l=t[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&f.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],r=!0,o=1;o<s.length;o++){var c=s[o];0!==n[c]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=s[0]))}return e}var r={},n={app:0},a=[];function i(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=r,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"155e":function(e,t,s){"use strict";var r=s("e74d"),n=s.n(r);n.a},1601:function(e,t,s){},"209d":function(e,t,s){"use strict";var r=s("ecc4"),n=s.n(r);n.a},"2a78":function(e,t,s){"use strict";var r=s("f4ba"),n=s.n(r);n.a},"375e":function(e,t,s){},"507e":function(e,t,s){},"557d":function(e,t,s){"use strict";var r=s("fd79"),n=s.n(r);n.a},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[e.modalCase?e._e():s("SearchForm",{attrs:{onSelect:e.insertInto,showTitle:!0}}),e.modalCase?s("Modal",{attrs:{show:e.show,onSelect:e.insertInto},on:{close:function(t){e.show=!1}}}):e._e()],1)},a=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"resourcespace-adra"},[s("div",{staticClass:"resourcespace-adra-search-form"},[e.showTitle?s("h1",[e._v("Search ResourceSpace")]):e._e(),s("div",{staticClass:"adra-main-search-form"},[s("div",{staticClass:"main-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchValue,expression:"searchValue"}],attrs:{type:"text"},domProps:{value:e.searchValue},on:{input:[function(t){t.target.composing||(e.searchValue=t.target.value)},function(t){return t.preventDefault(),e.update({fieldName:"resourcespace_search",value:t.target.value})}],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.submitSearch(t))}}})]),s("div",{staticClass:"search-button-wrapper"},[s("a",{staticClass:"button-primary1",attrs:{href:"#"},on:{click:e.submitSearch}},[s("i",{staticClass:"fa fa-search search-button"})])]),s("div",{staticClass:"advanced-search-wrapper"},[e.showAdvancedForm?s("a",{staticClass:"advanced-search",on:{click:function(t){e.advancedSerchFormIsExpanded=!e.advancedSerchFormIsExpanded}}},[e._v("Advanced Search")]):e._e(),e.showAdvancedForm?s("a",{staticClass:"advanced-search advanced-search-reset",on:{click:e.resetSearchForm}},[e._v("Reset")]):e._e()]),s("div",[e.formFields["main_form"]?s("ResourceTypeInput",{attrs:{fieldDef:e.formFields["main_form"]},on:{input:e.update}}):e._e()],1)]),s("div",{staticStyle:{clear:"both"}}),e.advancedSerchFormIsExpanded?s("div",{staticClass:"adra-advanced-search-form"},[s("AdvancedSearch",{attrs:{formFields:e.formFields},on:{input:e.update}})],1):e._e(),s("div",{staticStyle:{clear:"both"}})]),e.searchResultsCounter>e.offsetStep?s("div",[e._v(" "+e._s(1*e.resultsOffset+1+"-"+(1*e.resultsOffset+1*e.offsetStep)+" of "+e.searchResultsCounter+"results in "+Math.ceil(e.searchResultsCounter/e.offsetStep)+"pages")+" ")]):e._e(),s("div",{staticClass:"wrap resourcespace-adra-search-results"},[e._l(e.searchResults,(function(t,r){return s("ResourceList",{key:"resourceList_"+t.ref,attrs:{resource:t,index:r,selectedIndex:e.selectedIndex,displayOnIndex:e.displayOnIndex,selectedResourceDetails:e.selectedResourceDetails,onSelect:e.onSelect,selectedResourceId:e.selectedResourceId},on:{selectResource:e.setSelectedResource,resourceSelected:function(t){return e.resourceSelected(t)},resourceMounted:e.getContainerWidth}})})),e.showNoResults?s("div",[s("h2",{staticStyle:{color:"red"}},[e._v("No results")])]):e._e()],2),s("div",{staticStyle:{clear:"both"}}),e.searchResults.length>0?s("Paginator",{attrs:{resultsOffset:e.resultsOffset,offsetStep:e.offsetStep,searchResultsCounter:e.searchResultsCounter},on:{paginate:function(t){return e.doPaginate(t)}}}):e._e(),s("div",{staticStyle:{clear:"both"}})],1)},o=[],c=(s("b0c0"),s("d3b7"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[e.resource.url?s("div",{staticClass:"resource-listing",style:{border:e.setBorderColor}},[s("a",{staticClass:"img",attrs:{href:"#"},on:{click:e.getDetais}},[s("img",{attrs:{src:e.resource.url}})])]):e._e(),e.displayOnIndex==e.index?[s("div",{staticStyle:{clear:"both"}}),s("div",{staticStyle:{width:"100%"}},[e.index==e.displayOnIndex?s("ResourceDetails",{attrs:{resourceDetails:e.selectedResourceDetails,resourceId:e.selectedResourceId,onSelect:e.onSelect},on:{resourceSelected:function(t){return e.resourceSelected(t)}}}):e._e()],1)]:e._e()],2)}),l=[],u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"resource-details",attrs:{id:"detail_container_"+e.resourceId}},[e.resourceDetails?s("div",[e.resourceDetails.hasOwnProperty("orig_file")?s("div",{staticClass:"row-details"},[s("a",{staticClass:"link-details",attrs:{href:e.resourceDetails.orig_file,target:"_blank"}},[s("b",[e._v("Original File")]),e._v(" "),s("i",{staticClass:"fas fa-expand-arrows-alt"})]),e.importing&&"mediaLibrary"==e.onSelect?s("div",[s("div",{staticClass:"fa-3x"},[s("center",[s("i",{staticClass:"fas fa-spinner fa-spin"})])],1)]):e._e(),"mediaLibrary"!=e.onSelect?[s("button",{staticClass:"button-details ",attrs:{ref_id:e.resourceId,size_id:""},on:{click:function(t){return t.preventDefault(),e.selectSize(e.resourceId,"")}}},[e._v(e._s(e.buttonText))])]:[0==e.resourceDetails.imported?[s("button",{staticClass:"button-details ",attrs:{disabled:e.disableImport,ref_id:e.resourceId,size_id:""},on:{click:function(t){return t.preventDefault(),e.selectSize(e.resourceId,"")}}},[e._v(e._s(e.buttonText))])]:[s("span",{staticClass:"imported"},[e._v("imported")])]]],2):e._e(),"mediaLibrary"!=e.onSelect?e._l(Object.entries(e.resourceDetails.images),(function(t,r){return s("div",{key:"image_"+r+"_"+e.resourceId,staticClass:"row-details"},[s("a",{staticClass:"link-details",attrs:{href:t[1]["url"],target:"_blank"}},[e._v(" "+e._s(t[1]["name"])+" "),s("i",{staticClass:"fas fa-expand-arrows-alt"})]),s("button",{staticClass:"button-details",attrs:{ref_id:e.resourceId,size_id:t[0]},on:{click:function(s){return s.preventDefault(),e.selectSize(e.resourceId,t[0])}}},[e._v(e._s(e.buttonText))])])})):e._e(),s("div",{staticStyle:{clear:"both"}}),e._l(Object.entries(e.resourceDetails.fields),(function(t,r){return[s("div",{key:"field_"+r+"_"+e.resourceId,staticClass:"row-details"},[s("b",[e._v(e._s(t[0])+":")]),e._v(" "+e._s(t[1])+" ")])]}))],2):s("div",[s("div",{staticClass:"fa-3x"},[s("center",[s("i",{staticClass:"fas fa-spinner fa-spin"})])],1)])])},d=[],f=(s("c975"),s("1157")),h=s.n(f),p={name:"ResourceDetails",props:["resourceId","onSelect","resourceDetails"],data:function(){return{disableImport:!1,importing:!1}},computed:{buttonText:function(){return"copyClipboard"==this.onSelect?"copy shortcode":"mediaLibrary"==this.onSelect?"insert into media library":"insert shortcode"}},watch:{resourceDetails:function(e){}},mounted:function(){},methods:{selectSize:function(e,t){if("copyClipboard"==this.onSelect&&this.copyToClipboard(e,t),"classicInsert"==this.onSelect&&this.insertInClassicEditor(e,t),"mediaLibrary"==this.onSelect&&this.inserInMediaLibrary(e,t),0===this.onSelect.indexOf("widgetInsert")){var s=this.onSelect.substring(13);this.widgetInsert(e,t,s)}this.$emit("resourceSelected",{id:e,size:t})},inserInMediaLibrary:function(e,t){var s=this,r={action:"resourcespace_insert_into_media_library",resource:this.resourceDetails,resourceId:e,resourceSize:t},n=this;this.disableImport=!0,this.importing=!0,h.a.post(window.ajaxurl,r).then((function(e){JSON.parse(e)["uploaded"]?s.resourceDetails.imported=1:s.resourceDetails.imported=0,n.disableImport=!1,n.importing=!1}))},insertInClassicEditor:function(e,t){var s="[resourcespace id="+e+"]";""!=t&&(s="[resourcespace id="+e+" size_id="+t+"]"),wp.media.editor.insert(s)},widgetInsert:function(e,t,s){var r=document.getElementsByClassName("resource-id-"+s);r[0].value=e,r=document.getElementsByClassName("resource-size-"+s),r[0].value=t;var n=new KeyboardEvent("keydown",{code:"Enter",key:"Enter",charKode:13,keyCode:13,view:window});r[0].dispatchEvent(n)},copyToClipboard:function(e,t){var s="[resourcespace id="+e+"]";""!=t&&(s="[resourcespace id="+e+" size_id="+t+"]");var r=document.createElement("textarea");r.value=s,r.setAttribute("readonly",""),r.style={position:"absolute",left:"-9999px"},document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),alert("Copied the text: "+s)}}},m=p,v=(s("b645"),s("2877")),_=Object(v["a"])(m,u,d,!1,null,"0c14003e",null),y=_.exports,b={name:"ResourceList",props:["resource","onSelect","selectedResourceId","index","displayOnIndex","selectedResourceDetails","selectedIndex"],components:{ResourceDetails:y},data:function(){return{}},mounted:function(){this.$emit("resourceMounted",{})},methods:{getDetais:function(){this.$emit("selectResource",{resourceId:this.resource.ref,selectedIndex:this.index})},resourceSelected:function(e){this.$emit("resourceSelected",e)}},computed:{setBorderColor:function(){var e="1px solid #ccc";return this.selectedIndex==this.index&&(e="1px solid #ff0000"),e}}},S=b,C=(s("155e"),Object(v["a"])(S,c,l,!1,null,"10717418",null)),g=C.exports,x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"resource-type-input"}},[s("div",{staticStyle:{clear:"both"}}),s("div",{staticClass:"resource-type-input-wrapper"},[e._l(e.fieldDef,(function(t,r){return[t.hasOwnProperty("checked")?s("div",{key:r,staticClass:"resource-type-item"},[s("input",{ref:"_"+t.resourceId,refInFor:!0,attrs:{type:"checkbox",name:"resource_id[]",id:"_"+t.resourceId},domProps:{value:t.resourceId,checked:t.checked},on:{change:function(s){return e.onChange(t.resourceId)}}}),s("label",{attrs:{for:"_"+t.resourceId}},[e._v(e._s(t.label)+" ")]),s("br")]):e._e()]}))],2)])},w=[],I={name:"ResourceTypeInput",props:["fieldDef"],mounted:function(){for(var e in this.fieldDef)this.selectedResources[this.fieldDef[e].resourceId]=this.fieldDef[e].checked;this.$emit("input",{fieldName:"resource_id",value:this.selectedResources})},watch:{fieldDef:function(e){for(var t=0;t<e.length;t++)e[t].hasOwnProperty("checked")&&(document.getElementById("_"+e[t].resourceId).checked=e[t].checked)}},methods:{onChange:function(e){this.selectedResources[e]=document.getElementById("_"+e).checked,this.$emit("input",{fieldName:"resource_id",value:this.selectedResources})}},data:function(){return{selectedResources:{}}}},R=I,k=(s("cea3"),Object(v["a"])(R,x,w,!1,null,"52cdee7a",null)),D=k.exports,O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"advanced-search"},[s("tabs",[s("tab",{attrs:{title:"Main Fields"}},e._l(e.formFields.first_tab,(function(t,r){return s("CustomInput",{key:r,attrs:{fieldDef:t,index:r},on:{input:function(s){return e.update(t.name,s)},inputDate:function(s){return e.update(t.name,s)}}})})),1),s("tab",{attrs:{title:"All Fields"}},e._l(e.formFields.second_tab,(function(t,r){return s("CustomInput",{key:r,attrs:{fieldDef:t,index:r},on:{input:function(s){return e.update(t.name,s)},inputDate:function(s){return e.update(t.name,s)}}})})),1)],1),s("div",{staticStyle:{clear:"both"}})],1)},F=[],M=s("0652"),P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("div",{staticClass:"custom-input"},["text"==e.fieldDef.type?s("TextInput",{attrs:{fieldDef:e.fieldDef,value:e.fieldDef.value},on:{input:function(t){return e.update(e.fieldDef.name,t)}}}):e._e(),"select"==e.fieldDef.type?s("CustomSelect",{attrs:{fieldDef:e.fieldDef,value:e.fieldDef.value},on:{input:function(t){return e.update(e.fieldDef.name,t)}}}):e._e(),"date"==e.fieldDef.type?s("CustomMonthlyPicker",{attrs:{fieldDef:e.fieldDef,"v-model":e.selectedMonth,value:e.tmp},on:{input:function(t){return e.updateDate(e.fieldDef.name,t)}}}):e._e()],1),e.index%2==1?s("div",{staticStyle:{clear:"both"}}):e._e()])},$=[],Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"text-input"},[s("label",[e._v(e._s(e.fieldDef.label))]),s("input",{attrs:{type:"text"},domProps:{value:e.value},on:{input:function(t){return e.update("value",t.target.value)}}})])},E=[],V={name:"TextInput",props:["fieldDef","value"],mounted:function(){this.fieldDef.value=this.value},methods:{update:function(e,t){this.value=t,this.$emit("input",t)}}},j=V,N=(s("af02"),Object(v["a"])(j,Y,E,!1,null,"e4b3e51c",null)),B=N.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"custom-select"},[s("label",[e._v(e._s(e.fieldDef.label)+" "+e._s(e.value))]),s("select",{ref:"selectBox",attrs:{name:e.fieldDef.name},on:{input:function(t){return e.update(e.fieldDef.name,t.target.value)}}},[e._l(e.fieldDef.options,(function(t,r){return[s("option",{key:r,domProps:{value:t.key,selected:t.key==e.value}},[e._v(e._s(t.value))])]}))],2)])},L=[],z={name:"CustomSelect",props:["fieldDef","value"],methods:{update:function(e,t){this.$emit("input",t)}},watch:{value:function(e,t){this.$refs.selectBox.value=e}},data:function(){return{hasBeenSelected:!1}}},A=z,W=(s("af73"),Object(v["a"])(A,T,L,!1,null,"485ad3a5",null)),J=W.exports,K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"vue-monthly-picker"},[s("label",[e._v(e._s(e.fieldDef.label))]),s("div",{staticClass:"month-picker-wrapper",class:{"active visible":e.showMenu}},[s("div",{staticClass:"month-year-label picker",attrs:{type:"text",autocomplete:"off",tabindex:"0"},on:{click:e.openMenu}},[s("div",{staticClass:"month-year-display",class:[e.inputClass,{placeholder:!e.value}],attrs:{disabled:e.disabled},on:{click:e.openMenu}},[s("div",{staticClass:"display-text",class:"display-text-"+e.alignment,style:[{"text-align":e.alignment}]},[e._v(e._s(e.displayText))]),e.clearOption&&e.value?s("span",{staticClass:"vmp-input-append",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.clearSelect(t)}}},[s("i",{staticClass:"vmp-clear-icon"})]):e._e()])]),s("div",{staticClass:"text"}),s("div",{staticClass:"date-popover",class:e.menuClass,style:e.menuStyle,attrs:{tabindex:"-1"}},[s("div",{staticClass:"picker",staticStyle:{"text-align":"center"}},[s("div",{staticClass:"flexbox"},[s("span",{staticClass:"prev",class:{deactive:!e.canBack},on:{click:e.prevYear}}),s("div",[e._v(e._s(e.year))]),s("span",{staticClass:"next",class:{deactive:!e.canNext},on:{click:e.nextYear}})]),s("div",{staticClass:"flexbox monthItem"},[e._l(e.monthLabels,(function(t,r){return[e.isActive(r)?s("div",{key:r,staticClass:"item active",class:{selected:e.isCurrentSelected(e.year,r)},style:[{"background-color":e.getBackgroundColor(e.year,r)}],on:{click:function(t){return e.selectMonth(r)}}},[e._v(e._s(t)+" ")]):s("div",{key:r,staticClass:"item deactive",class:{selected:e.isCurrentSelected(e.year,r)}},[e._v(" "+e._s(t)+" ")])]}))],2)])])])])},H=[],q=(s("a9e3"),s("25f0"),{name:"CustomMonthlyPicker",props:{fieldDef:{},value:{default:null},disabled:{type:Boolean,default:!1},inputClass:{default:"input"},placeHolder:{type:String,default:""},alignment:{type:String,default:"left",validator:function(e){return-1!==["left","right","center"].indexOf(e)}},selectedBackgroundColor:{type:String,default:"#007bff"},monthLabels:{type:Array,default:function(){return["1","2","3","4","5","6","7","8","9","10","11","12"]}},min:{default:null},max:{default:null},dateFormat:{type:String,default:"YYYY/MM"},clearOption:{type:Boolean,default:!0}},data:function(){return{showMenu:!1,year:moment().format("YYYY"),month:moment().format("MM"),selected:!1}},mounted:function(){this.init()},watch:{value:function(e){this.setValue(e)}},computed:{menuClass:function(){return{visible:this.showMenu,hidden:!this.showMenu}},menuStyle:function(){return{display:this.showMenu?"block":"none",left:"right"===this.alignment?"100%":"center"===this.alignment?"50%":"",transform:"right"===this.alignment?"translate(-100%,0)":"center"===this.alignment?"translate(-50%,0)":""}},displayText:function(){var e="";return e=this.selected?this.year+"/"+this.month:"",e},canBack:function(){if(!this.min)return!0;var e=this.internalMomentValue.clone().startOf("year");return this.min.isBefore(e)},canNext:function(){if(!this.max)return!0;var e=this.internalMomentValue.clone().endOf("year");return e.isBefore(this.max)},internalMomentValue:function(){var e=this.year+"-0"+this.month;return this.month.length>1&&(e=this.year+"-"+this.month),moment(e,"YYYY-MM")}},methods:{init:function(){var e=this;document.addEventListener("click",(function(t){e.$el&&!e.$el.contains(t.target)&&e.closeMenu()}),!1),this.setValue(this.value)},openMenu:function(){this.disabled||(this.showMenu=!0)},closeMenu:function(){this.showMenu=!1},prevYear:function(){if(this.canBack){var e=parseInt(this.year)-1;this.year=e.toString()}},nextYear:function(){if(this.canNext){var e=parseInt(this.year)+1;this.year=e.toString()}},selectMonth:function(e){this.selected=!0,this.month=(parseInt(e)+1).toString(),this.selectPicker(),this.closeMenu()},selectPicker:function(){this.$emit("input",this.internalMomentValue.clone()._i),this.$emit("selected",this.internalMomentValue.clone())},setValue:function(e){"string"===typeof e&&(e=moment(e)),e&&e.isValid()&&(this.month=e.format("MM"),this.year=e.format("YYYY"))},isActive:function(e){var t=e+1,s=this.year+"/"+(t<10?"0"+t:t);return(!this.min||!moment(s,"YYYY/MM").isBefore(this.min))&&(!this.max||!moment(s,"YYYY/MM").isAfter(this.max))},isCurrentSelected:function(e,t){if(!this.value)return!1;var s=this.value;if(s="string"===typeof this.value?moment(this.value):moment(),s&&s.isValid()){var r=s.format("MM"),n=s.format("YYYY");return Number(r)===Number(t+1)&&Number(n)===Number(e)}return!1},getBackgroundColor:function(e,t){if(this.isCurrentSelected(e,t))return this.selectedBackgroundColor},clearSelect:function(){this.selected=!1,this.$emit("input",""),this.$emit("selected",null)}}}),G=q,Q=(s("2a78"),Object(v["a"])(G,K,H,!1,null,"31977497",null)),U=Q.exports,X={name:"CustomInput",components:{CustomSelect:J,TextInput:B,CustomMonthlyPicker:U},props:["fieldDef","index"],methods:{update:function(e,t){this.$emit("input",t)},updateDate:function(e,t){this.$emit("inputDate",{value:t,type:"date"})}},data:function(){return{selectedMonth:moment(),tmp:moment(null)}}},Z=X,ee=(s("209d"),Object(v["a"])(Z,P,$,!1,null,"5195630e",null)),te=ee.exports,se={name:"AdvancedSearch",components:{Tabs:M["b"],Tab:M["a"],CustomInput:te},props:["formFields"],mounted:function(){},methods:{update:function(e,t){this.$emit("input",{fieldName:e,value:t})}}},re=se,ne=(s("3a64"),s("772f"),Object(v["a"])(re,O,F,!1,null,"17bbd0f4",null)),ae=ne.exports,ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"paginatorP"},[s("div",{staticClass:"wrapperP",attrs:{"v-if":e.showPaginator}},[s("div",{staticClass:"centerP"},[s("a",{staticClass:"buttonP prev",style:e.prevButtonStatus(),attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.prev()}}},[e._v("Prev")]),e.searchResultsCounter>e.offsetStep?[s("input",{ref:"pagInput",staticClass:"inputPaginator",domProps:{value:Math.round(e.resultsOffset/e.offsetStep)+1},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.doPaginate())}}})]:e._e(),s("a",{staticClass:"buttonP next",style:e.nextButtonStatus(),attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.next()}}},[e._v("Next")])],2)])])},oe=[],ce=(s("8ba4"),s("498a"),{props:["resultsOffset","offsetStep","searchResultsCounter"],data:function(){return{showPaginator:!0}},methods:{prev:function(){0!=this.resultsOffset&&this.$emit("paginate",-1)},next:function(){1*this.resultsOffset+1*this.offsetStep<1*this.searchResultsCounter&&this.$emit("paginate",1)},prevButtonStatus:function(){var e={};return 0==this.resultsOffset&&(e["background-color"]="#d1d1d1"),e},nextButtonStatus:function(){var e={};return 1*this.resultsOffset+1*this.offsetStep>=1*this.searchResultsCounter&&(e["background-color"]="#d1d1d1"),e},doPaginate:function(e){var t=this.$refs.pagInput.value.trim();if(!Number.isInteger(1*t)||1*t<0||1*t>Math.round(this.searchResultsCounter/this.offsetStep+1))this.$refs.pagInput.value=Math.round(this.resultsOffset/this.offsetStep)+1;else{var s=t-Math.round(this.resultsOffset/this.offsetStep)-1;this.$emit("paginate",s)}}}}),le=ce,ue=(s("6c0e"),Object(v["a"])(le,ie,oe,!1,null,"69d96c3b",null)),de=ue.exports,fe={name:"SearchForm",props:["onSelect","showTitle","clean"],components:{ResourceList:g,ResourceTypeInput:D,AdvancedSearch:ae,Paginator:de},data:function(){return{resultsOffset:0,offsetStep:20,searchedTerm:"",formFields:[],searchFormSelectedValues:{},searchResults:[],searchResultsCounter:0,currentResource:0,showAdvancedForm:!1,advancedSerchFormIsExpanded:!1,searchValue:"",showNoResults:!1,containerWidth:0,displayOnIndex:-1,selectedIndex:-1,selectedResourceDetails:!1,defaultResources:!1}},watch:{clean:function(e){e&&(this.searchValue="",this.searchResults=!1,this.searchFormSelectedValues={})}},mounted:function(){this.getSerchForm(),window.addEventListener("resize",this.getContainerWidth)},methods:{doPaginate:function(e){this.resultsOffset+=e*this.offsetStep,this.resultsOffset<0&&(this.resultsOffset=0),this.getSearchResults()},resetSearchForm:function(){if(this.searchValue="",this.searchResults="",this.showAdvancedForm){var e=0;for(e=0;e<this.formFields.second_tab.length;e++)this.formFields.second_tab[e].value=this.formFields.second_tab[e].default_value;for(e=0;e<this.formFields.first_tab.length;e++)this.formFields.first_tab[e].value=this.formFields.first_tab[e].default_value;this.defaultResources.push([]),this.formFields.main_form=this.defaultResources}this.searchFormSelectedValues=[]},getContainerWidth:function(){var e=document.getElementsByClassName("resourcespace-adra-search-results");e[0]&&(this.containerWidth=e[0].offsetWidth),this.onResizeSetContainer()},update:function(e){if(this.searchFormSelectedValues[e.fieldName]=e.value,this.formFields.hasOwnProperty("first_tab")){for(var t=0;t<this.formFields.first_tab.length;t++)this.formFields.first_tab[t].name==e.fieldName&&(this.formFields.first_tab[t].value=e.value);for(var s=0;s<this.formFields.second_tab.length;s++)this.formFields.second_tab[s].name==e.fieldName&&(this.formFields.second_tab[s].value=e.value)}},getSerchForm:function(){var e=this,t="?action=resourcespace_get_form_fields",s=this;fetch(window.ajaxurl+t).then((function(e){return e.json()})).then((function(t){if(s.formFields=t,!e.defaultResources){s.defaultResources=[];for(var r=0;r<t.main_form.length;r++)s.defaultResources.push(t.main_form[r])}s.showAdvancedForm=!0}))},getSearchResults:function(){this.selectedResourceDetails=!1,this.selectedIndex=-1,this.advancedSerchFormIsExpanded=!1,this.searchResults=[];var e={action:"resourcespace_get_search_results",offset:this.resultsOffset};for(var t in this.searchFormSelectedValues)this.searchFormSelectedValues.hasOwnProperty(t)&&("limit"==t&&(this.offsetStep=this.searchFormSelectedValues[t]),e[t]=this.searchFormSelectedValues[t]);this.showNoResults=!1;var s=this;h.a.post(window.ajaxurl,e).then((function(e){s.searchResults=JSON.parse(e),0==s.searchResults.length&&(s.showNoResults=!0)}))},getSearchResultsCounter:function(){this.searchResults=[];var e={action:"resourcespace_get_search_results_counter"};for(var t in this.searchFormSelectedValues)this.searchFormSelectedValues.hasOwnProperty(t)&&"limit"!=t&&(e[t]=this.searchFormSelectedValues[t]);var s=this;s.searchResultsCounter=0,h.a.post(window.ajaxurl,e).then((function(e){s.searchResultsCounter=JSON.parse(e)}))},setSearchValues:function(){},setSearchValue:function(e,t){this.searchFormSelectedValues[e.name]=e.default_value},submitSearch:function(){this.resultsOffset=0,this.getSearchResults(),this.getSearchResultsCounter()},onResizeSetContainer:function(){if(this.selectedResourceId>0&&this.containerWidth>0){var e=Math.floor(this.containerWidth/197),t=Math.floor(this.selectedIndex/e)+1,s=t*e;s>this.searchResults.length&&(s=this.searchResults.length),this.displayOnIndex=s-1}},setSelectedResource:function(e){this.selectedIndex=e.selectedIndex;var t=Math.floor(this.containerWidth/197),s=Math.floor(e.selectedIndex/t)+1,r=s*t;r>this.searchResults.length&&(r=this.searchResults.length),this.selectedResourceId!=e.resourceId?(this.selectedResourceId=e.resourceId,this.displayOnIndex=r-1,this.getResourceDetails()):(this.selectedResourceId=0,this.displayOnIndex=-1)},hideDetails:function(e){this.currentResource=0},selectedDate:function(e){this.searchFormSelectedValues["month_interval"]=e?e.format("YYYY|MM")+"|01":null},resourceSelected:function(e){this.currentResource=0,this.$emit("resourceSelected",e)},getResourceDetails:function(){var e=this;if(this.displayOnIndex>=0){this.selectedResourceDetails=!1;var t="?action=resourcespace_get_resource_details&resource_id="+this.selectedResourceId,s=this;fetch(window.ajaxurl+t).then((function(e){return e.json()})).then((function(t){if("mediaLibrary"!=e.onSelect)s.selectedResourceDetails=t;else{var r="?action=resourcespace_check_media_library&resource_id="+e.selectedResourceId;fetch(window.ajaxurl+r).then((function(e){return e.json()})).then((function(e){t.imported=e,s.selectedResourceDetails=t})).catch((function(e){t.imported=0,s.selectedResourceDetails=t}))}}))}}}},he=fe,pe=(s("557d"),Object(v["a"])(he,i,o,!1,null,"2815717e",null)),me=pe.exports,ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("transition",{attrs:{name:"modal"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"modal-mask",on:{click1:e.close}},[s("div",{staticClass:"modal-container",on:{click:function(e){e.stopPropagation()}}},[s("div",{staticClass:"modal-header"},[s("div",{staticClass:"modal-title"},[s("h1",[e._v("Search ResourceSpace")])]),s("div",{staticClass:"modal-close"},[s("i",{staticClass:"fas fa-times",on:{click:function(t){return e.close(!1)}}})])]),s("div",{staticClass:"modal-body"},[s("SearchForm",{attrs:{onSelect:e.onSelect,showTitle:!1,clean:e.show},on:{resourceSelected:function(t){return e.close(t)}}})],1)])])])],1)},_e=[],ye={name:"VueModal",components:{SearchForm:me},data:function(){return{resourceDetails:!1,resourceFields:[],resourceImages:[]}},props:["show","onSelect"],methods:{close:function(e){this.$emit("close"),e&&0!==this.onSelect.indexOf("widgetInsert")&&this.$emit("resourceSelected",e)}},mounted:function(){var e=this;document.addEventListener("keydown",(function(t){e.show&&27==t.keyCode&&e.close(!1)}))},watch:{show:function(e,t){var s=document.getElementsByClassName("edit-post-header");s.length&&(s[0].style.zIndex=e?"auto":"30")}}},be=ye,Se=(s("aa01"),Object(v["a"])(be,ve,_e,!1,null,"6e41ebb9",null)),Ce=Se.exports,ge={name:"app",components:{SearchForm:me,Modal:Ce},props:["modalCase","insertInto"],data:function(){return{show:!0}}},xe=ge,we=Object(v["a"])(xe,n,a,!1,null,null,null),Ie=we.exports;r["a"].config.productionTip=!1,window.displaySearchFrom=function(e,t){var s=new r["a"]({render:function(s){return s(Ie,{props:{modalCase:e,insertInto:t}})}}).$mount("#searchFrom");return s}},5913:function(e,t,s){},"63fc":function(e,t,s){},"6c0e":function(e,t,s){"use strict";var r=s("f807"),n=s.n(r);n.a},"772f":function(e,t,s){"use strict";var r=s("5913"),n=s.n(r);n.a},a58a:function(e,t,s){},aa01:function(e,t,s){"use strict";var r=s("507e"),n=s.n(r);n.a},af02:function(e,t,s){"use strict";var r=s("a58a"),n=s.n(r);n.a},af73:function(e,t,s){"use strict";var r=s("1601"),n=s.n(r);n.a},b645:function(e,t,s){"use strict";var r=s("375e"),n=s.n(r);n.a},cea3:function(e,t,s){"use strict";var r=s("63fc"),n=s.n(r);n.a},e74d:function(e,t,s){},ecc4:function(e,t,s){},f4ba:function(e,t,s){},f807:function(e,t,s){},fd79:function(e,t,s){}});
//# sourceMappingURL=app.js.map